#import "./fragments/collection.graphql"
#import "./fragments/collectionDetails.graphql"

query collectionListWithSearch(
  $first: Int!
  $offset: Int
  $search: [CollectionEntityFilter!]
  $listed: [NFTEntityFilter!]
  $orderBy: [CollectionEntitiesOrderBy!] = [BLOCK_NUMBER_DESC]
  $collectionIds: [String!]
) {
  collectionEntities(
    orderBy: $orderBy
    first: $first
    offset: $offset
    filter: { id: { in: $collectionIds }, and: $search }
  ) {
    totalCount
    nodes {
      ...collection
      ...collectionDetails
      nfts(filter: { burned: { distinctFrom: true }, and: $listed }) {
        nodes {
          id
          metadata
          name
          price
          burned
          currentOwner
        }
      }
    }
  }
}
